// Tree starts off with a listener on 8080
{	
	// Listener's module is called 'HttpService'	
	type = "HttpService";
	// modconf contains information that will be passed to the 
	// module upon initialisation
	modconf = {
		prefixes = ["https://*:8080/"];
	}; // Httpserver configuration
	// _branch-suffixed settings are named branches the current module
	// looks for (generally, the identifier before _branch, is something
	// the module is aware of.)
	http_branch = {
		type = "BasicAuthService";
		modconf = { 
			#include "credentials.conf"
		}; // Auth configuration
		http_branch = {
			type = "HtmlTemplateService";
			modconf = {
				title = "Filelist";
				templatefile = "templeet.html";
			};
			testsegment_branch = {
				// In this case, the Http-listener branches into a file-server which
				// provides files and directory listings
				type = "FileService";
				modconf = {
					mappings = [
					{
						// URL this fileservice will work on
						url = "/files";
						// filesystem path this fileservice maps to
						filesystempath = "/home/rob";
						// whitelist of extensions and mimetypes
						whitelist = { 
							#include "whitelist.conf" 
						};
						// set to true when browsing folder is allowed.
						// settings after this one may remain unset if
						// this is false.
						allowbrowsing = True;
						#include "listmarkup.conf"
					}  // A mapping from my homedir to http root
					]; // Array of url-to-fs mappings
				}; // Files configuration 
			};
		}; // Files tree (Files-node)		
	}; // Auth-Files tree (Auth-node)
}  // Http-Auth-Files tree (Httpserver-node)
